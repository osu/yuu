$(document).ready(()=>{$("#logo").prop("src",`/img/waifu_logo/${Math.round(15*Math.random())}.png`),$("#waifu").prop("src",`/img/waifu/${Math.round(7*Math.random())}.png`),particlesJS("particles-js",{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:0.5,random:!1,anim:{enable:!1,speed:1,opacity_min:0.1,sync:!1}},size:{value:5,random:!0,anim:{enable:!1,speed:40,size_min:0.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:0.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!1});var a=d=>{var g=new FormData;g.append("upload[]",d),$(".uploadedFiles").css("display","block");var h=Date.now(),j=Date.now()+h,k=Date.now()+j;$(".uploadedFiles").append(`<li id="${h}"><a id="${j}">${c(d.name,30," ...")}</a><progress class="progress is-primary" value="" max="" id="${k}"></progress></li>`),$.ajax({type:"POST",url:"/api/upload",data:g,xhr:function(){var l=$.ajaxSettings.xhr();return l.upload&&l.upload.addEventListener("progress",m=>{if(m.lengthComputable){var n=m.total,o=m.loaded;$("#"+k).prop("max",n),$("#"+k).prop("value",o)}},!1),l},cache:!1,contentType:!1,processData:!1,success:function(l){$("#"+j).html(l.items[0].url),$("#"+j).prop("href",l.items[0].url),$("#"+j).prop("target","blank")},error:function(l){try{l=JSON.parse(l),b({type:"error",title:l.error})}catch(m){b({type:"error",title:"Unknown error occured"})}$("#"+h).remove(),1>$(".uploadedFiles").children().length&&$(".uploadedFiles").css("display","none")}})};const b=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});var c=function(d,g,h){return d&&g&&h?d.length<g?d:d.trim().slice(0,g)+h:void 0};$("#upload").click(()=>{$("#input").trigger("click")}),$("form").submit(d=>{d.preventDefault()}),$("#input").change(d=>{if(d.preventDefault(),0<$("#input")[0].files.length)for(var j,g=d.target.files||d.dataTransfer.files,h=0;j=g[h];h++)a(j)}),$(document).on("dragenter","#upload",function(){return $(this).css("border","3px dashed #371c42"),!1}),$(document).on("dragover","#upload",function(d){return d.preventDefault(),d.stopPropagation(),$(this).css("border","3px dashed #371c42"),!1}),$(document).on("dragleave","#upload",function(d){return d.preventDefault(),d.stopPropagation(),$(this).css("border","none"),!1}),$(document).on("drop","#upload",function(d){if($(this).css("border","none"),d.preventDefault(),d.originalEvent.dataTransfer&&0<d.originalEvent.dataTransfer.files.length)for(var g=d.originalEvent.dataTransfer.files,h=0;h<g.length;h++)a(g[h])})});